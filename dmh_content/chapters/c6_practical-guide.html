<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Chapter 6: Practical guides - NINA&#x27;s data management handbook</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content=" ">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">Preliminary comments</a></li><li class="chapter-item expanded affix "><li class="part-title">Core book</li><li class="chapter-item expanded "><a href="../../dmh_content/chapters/c1_introduction.html"><strong aria-hidden="true">1.</strong> Chapter 1: Introduction</a></li><li class="chapter-item expanded "><a href="../../dmh_content/chapters/c2_structure-and-documenting.html"><strong aria-hidden="true">2.</strong> Chapter 2: Structuring and documenting data</a></li><li class="chapter-item expanded "><a href="../../dmh_content/chapters/c3_data-services.html"><strong aria-hidden="true">3.</strong> Chapter 3: Data services</a></li><li class="chapter-item expanded "><a href="../../dmh_content/chapters/c4_user-portals.html"><strong aria-hidden="true">4.</strong> Chapter 4: User portals and documentation</a></li><li class="chapter-item expanded "><a href="../../dmh_content/chapters/c5_data-governance.html"><strong aria-hidden="true">5.</strong> Chapter 5: Data governance</a></li><li class="chapter-item expanded "><a href="../../dmh_content/chapters/c6_practical-guide.html" class="active"><strong aria-hidden="true">6.</strong> Chapter 6: Practical guides</a></li><li class="chapter-item expanded "><a href="../../dmh_content/chapters/c7_acknowledgements.html"><strong aria-hidden="true">7.</strong> Acknowledgements</a></li><li class="chapter-item expanded affix "><li class="part-title">Vocabulary</li><li class="chapter-item expanded "><a href="../../dmh_content/vocab/glossary.html"><strong aria-hidden="true">8.</strong> Glossary of terms and names</a></li><li class="chapter-item expanded "><a href="../../dmh_content/vocab/acronyms.html"><strong aria-hidden="true">9.</strong> List of acronyns</a></li><li class="chapter-item expanded affix "><li class="part-title">Appendix</li><li class="chapter-item expanded "><a href="../../dmh_content/appendix/appendixA.html"><strong aria-hidden="true">10.</strong> Appendix A: list of referenced softwares & services</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Appendix B: Users of NINA's data</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">NINA&#x27;s data management handbook</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang/mdBook/tree/master/guide" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/rust-lang/mdBook/edit/master/guide/src/dmh_content/chapters/c6_practical-guide.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="6-practical-guides"><a class="header" href="#6-practical-guides">6. Practical Guides</a></h1>
<p>This chapter includes how-to’s and other practical guidance for data producers.</p>
<h2 id="61-create-a-data-management-plan-dmp"><a class="header" href="#61-create-a-data-management-plan-dmp">6.1 Create a Data Management Plan (DMP)</a></h2>
<hr />
<p>The funding agency of your project will usually provide requirements, guidelines or a template for the DMP. If this is not the case or for datasets that are not part of a project use the template provided by your institution or the template based on the <a href="https://www.forskningsradet.no/contentassets/e4cd6d2c23cf49d4989bb10c5eea087a/se_rdm_practical_guide_final.pdf">recommendations by Science Europe</a>.</p>
<h3 id="611-using-easydmp"><a class="header" href="#611-using-easydmp">6.1.1 Using easyDMP</a></h3>
<ol>
<li>
<p>Log in to <a href="https://easydmp.sigma2.no/login/">easyDMP</a>, use <strong>Dataporten</strong> if your institution supports that, otherwise pick one of the other login methods.</p>
</li>
<li>
<p>Click on <strong>+ Create a new plan</strong> and pick a template</p>
</li>
<li>
<p>By using the <strong>Summary</strong> button from page two and on, you can get an overview of all the questions.</p>
</li>
</ol>
<h3 id="612-publishing-the-plan"><a class="header" href="#612-publishing-the-plan">6.1.2 Publishing the plan</a></h3>
<p>Currently you can use the <em>export</em> function in easyDMP to download an HTML or PDF version of the DMP and use it further. This might change if &quot;<a href="https://github.com/hmpf/easydmp/issues/226">Hosted DMP</a>&quot; gets implemented.</p>
<h2 id="62-submitting-data-as-netcdf-cf"><a class="header" href="#62-submitting-data-as-netcdf-cf">6.2 Submitting data as NetCDF-CF</a></h2>
<h3 id="621-workflow"><a class="header" href="#621-workflow">6.2.1 Workflow</a></h3>
<ol>
<li>
<p>Define your dataset (see <a href="#glossary-dataset">dataset</a> and <a href="#dataset">???</a>)</p>
</li>
<li>
<p>Create a NetCDF-CF file (see <a href="#data-as-netcdf-cf">Creating NetCDF-CF files</a>)</p>
<ul>
<li>
<p>Add discovery metadata as global attributes (see <a href="#acdd-elements">global attibutes section</a>)</p>
</li>
<li>
<p>Add variables and <a href="#glossary-use-metadata">use metadata</a> following the <a href="https://cfconventions.org/">CF conventions</a></p>
</li>
</ul>
</li>
<li>
<p>Store the NetCDF-CF file in a suitable location, and distribute it via thredds or another dap server (see, e.g., <a href="#add-to-thredds">How to add NetCDF-CF data to thredds</a>)</p>
</li>
<li>
<p>Register your dataset in a searchable catalog (see <a href="#register-dataset-in-catalog">How to register your data in the catalog service</a>)</p>
<ul>
<li>
<p>Test that your dataset contains the necessary discovery metadata and create an MMD xml file (see <a href="#local-mmd-xml-generation">Generation of MMD xml file from NetCDF-CF</a>)</p>
</li>
<li>
<p>Test the MMD xml file (see <a href="#test-mmd-file">Test the MMD xml file</a>)</p>
</li>
<li>
<p>Push the MMD xml file to the discovery metadata catalog (see <a href="#push-mmd-file">Push the MMD xml file to the discovery metadata catalog</a>)</p>
</li>
</ul>
</li>
</ol>
<h3 id="622-creating-netcdf-cf-files"><a class="header" href="#622-creating-netcdf-cf-files">6.2.2 Creating NetCDF-CF files</a></h3>
<p>By documenting and formatting your data using <a href="#netcdf">NetCDF</a> following the <a href="https://cfconventions.org/">CF conventions</a> and the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3">Attribute Convention for Data Discovery (ACDD)</a>, <a href="#mmd">MMD</a> files can be automatically generated from the <a href="#netcdf">NetCDF</a> files. The <a href="#cf">CF conventions</a> is a controlled vocabulary providing a definitive description of what the data in each variable represents, and the spatial and temporal properties of the data. The <a href="#acdd">ACDD</a> vocabulary describes attributes recommended for describing a <a href="#netcdf">NetCDF</a> dataset to data discovery systems. See, e.g., <a href="https://unidata.github.io/netcdf4-python/">netCDF4-python docs</a>, or <a href="http://xarray.pydata.org/en/stable/user-guide/io.html">xarray docs</a> for documentation about how to create netCDF files.</p>
<p>The ACDD recommendations should be followed in order to properly document your netCDF-CF files. The below tables summarize required and recommended ACDD and some additional attributes that are needed to properly populate a discovery metadata catalog which fulfills the requirements of international standards (e.g., GCMD/DIF, the INSPIRE and WMO profiles of ISO19115, etc.).</p>
<h4 id="6221-notes"><a class="header" href="#6221-notes">6.2.2.1 Notes</a></h4>
<p><strong>Keywords</strong> describe the content of your dataset following a given vocabulary. You may use any vocabularies to define your keywords, but a link to the keyword definitions should be provided in the ``keywords_vocabulary`` attribute. This attribute provides information about the vocabulary defining the keywords used in the ``keywords`` attribute. Example:</p>
<p>:keywords_vocabulary = &quot;GCMDSK:GCMD Science Keywords:https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/sciencekeywords, GEMET:INSPIRE Themes:http://inspire.ec.europa.eu/theme, NORTHEMES:GeoNorge Themes:https://register.geonorge.no/metadata-kodelister/nasjonal-temainndeling&quot; ;</p>
<p>Note that the <strong>GCMDSK</strong>, <strong>GEMET</strong> and <strong>NORTHEMES</strong> vocabularies are required for indexing in <a href="https://adc.met.no/">S-ENDA</a> and <a href="https://www.geonorge.no/en/">Geonorge</a>. You may find appropriate keywords at the following links:</p>
<ul>
<li>
<p><a href="https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/sciencekeywords">GCMDSK</a></p>
</li>
<li>
<p><a href="http://inspire.ec.europa.eu/theme">GEMET</a></p>
</li>
<li>
<p><a href="https://register.geonorge.no/metadata-kodelister/nasjonal-temainndeling">NORTHEMES</a></p>
</li>
</ul>
<p>The keywords should be provided by the ``keywords`` attribute as a comma separated list with a short name defining the vocabulary used, followed by the actual keyword, i.e., ``short_name:keyword``. Example:</p>
<p>:keywords = &quot;GCMDSK:Earth Science &gt; Atmosphere &gt; Atmospheric radiation, GEMET:Meteorological geographical features, GEMET:Atmospheric conditions, NORTHEMES:Weather and climate&quot; ;</p>
<p>See <a href="https://adc.met.no/node/96">https://adc.met.no/node/96</a> for more information about how to define the ACDD keywords.</p>
<p>A data <strong>license</strong> provides information about any restrictions on the use of the dataset. To support a linked data approach, the ``license`` element should be supported by a ``license_resource`` element, providing a link to the license definition. Example:</p>
<p>:license = &quot;CC-BY-4.0&quot; ;<br />
:license_resource = &quot;http://spdx.org/licenses/CC-BY-4.0&quot; ;</p>
<h4 id="6222-list-of-attributes"><a class="header" href="#6222-list-of-attributes">6.2.2.2 List of Attributes</a></h4>
<p>This section provides lists of ACDD elements that are required and recommended, as well as some extra elements that are needed to fully support our data management needs. The right columns of these tables provide the <a href="https://htmlpreview.github.io/?https://github.com/metno/mmd/blob/master/doc/mmd-specification.html">MET Norway Metadata Specification (MMD)</a> fields that map to the ACDD (and our extension to ACDD) elements. Please refer to <a href="https://htmlpreview.github.io/?https://github.com/metno/mmd/blob/master/doc/mmd-specification.html">MMD</a> for definitions of these elements, as well as controlled vocabularies that should be used. Note that the below tables are automatically generated - check <a href="https://github.com/metno/py-mmd-tools/blob/master/py_mmd_tools/mmd_elements.yaml">https://github.com/metno/py-mmd-tools/blob/master/py_mmd_tools/mmd_elements.yaml</a> if anything is unclear.</p>
<p>In order to check your netCDF-CF files, and to create MMD xml files, you can use the nc2mmd.py script in the <a href="https://github.com/metno/py-mmd-tools">py-mmd-tools</a> Python package.</p>
<p>The following ACDD elements are required:</p>
<div class="table-wrapper"><table><thead><tr><th>ACDD Attribute</th><th>MMD equivalent</th><th>Comment</th></tr></thead><tbody>
<tr><td>id</td><td>metadata_identifier</td><td>Required, and should be UUID. No repetition allowed.</td></tr>
<tr><td>naming_authority</td><td>metadata_identifier</td><td>Required. We recommend using reverse-DNS naming. No repetition allowed.</td></tr>
<tr><td>date_created</td><td>last_metadata_update&gt;update&gt;datetime</td><td>Format as ISO8601.</td></tr>
<tr><td>title</td><td>title&gt;title</td><td>Use ACDD extension &quot;title_no&quot; for Norwegian translation.</td></tr>
<tr><td>summary</td><td>abstract&gt;abstract</td><td>Use ACDD extension &quot;summary_no&quot; for Norwegian translation.</td></tr>
<tr><td>time_coverage_start</td><td>temporal_extent&gt;start_date</td><td>Comma separated list.</td></tr>
<tr><td>geospatial_lat_max</td><td>geographic_extent&gt;rectangle&gt;north</td><td>No repetition allowed.</td></tr>
<tr><td>geospatial_lat_min</td><td>geographic_extent&gt;rectangle&gt;south</td><td>No repetition allowed.</td></tr>
<tr><td>geospatial_lon_max</td><td>geographic_extent&gt;rectangle&gt;east</td><td>No repetition allowed.</td></tr>
<tr><td>geospatial_lon_min</td><td>geographic_extent&gt;rectangle&gt;west</td><td>No repetition allowed.</td></tr>
<tr><td>keywords</td><td>keywords&gt;keyword</td><td>Comma separated list.</td></tr>
<tr><td>keywords_vocabulary</td><td>keywords&gt;vocabulary</td><td>Comma separated list.</td></tr>
</tbody></table>
</div>
<p>The following ACDD elements are (highly) recommended:</p>
<div class="table-wrapper"><table><thead><tr><th>ACDD Attribute</th><th>Default</th><th>MMD equivalent</th><th>Comment</th></tr></thead><tbody>
<tr><td>date_metadata_modified</td><td></td><td>last_metadata_update&gt;update&gt;datetime</td><td>Format as ISO8601. Comma separated list if more than once.</td></tr>
<tr><td>time_coverage_end</td><td></td><td>temporal_extent&gt;end_date</td><td>Comma separated list.</td></tr>
<tr><td>geospatial_bounds</td><td></td><td>geographic_extent&gt;polygon</td><td>No repetition allowed.</td></tr>
<tr><td>processing_level</td><td></td><td>operational_status</td><td>No repetition allowed. See the MMD docs for valid keywords.</td></tr>
<tr><td>license</td><td></td><td>use_constraint&gt;identifier</td><td>No repetition allowed.</td></tr>
<tr><td>creator_role</td><td>Investigator</td><td>personnel&gt;role</td><td>Comma separated list.</td></tr>
<tr><td>contributor_role</td><td>Investigator</td><td>personnel&gt;role</td><td>Comma separated list.</td></tr>
<tr><td>creator_name</td><td>Not available</td><td>personnel&gt;name</td><td>Comma separated list.</td></tr>
<tr><td>contributor_name</td><td>Not available</td><td>personnel&gt;name</td><td>Comma separated list.</td></tr>
<tr><td>creator_email</td><td>Not available</td><td>personnel&gt;email</td><td>Comma separated list.</td></tr>
<tr><td>creator_institution</td><td>Not available</td><td>personnel&gt;organisation</td><td>Comma separated list.</td></tr>
<tr><td>institution</td><td></td><td>data_center&gt;data_center_name&gt;long_name</td><td>Comma separated list.</td></tr>
<tr><td>publisher_url</td><td></td><td>data_center&gt;data_center_url</td><td>Comma separated list.</td></tr>
<tr><td>project</td><td></td><td>project&gt;long_name</td><td>Semicolon separated list.</td></tr>
<tr><td>platform</td><td></td><td>platform&gt;long_name</td><td>Comma separated list.</td></tr>
<tr><td>platform_vocabulary</td><td></td><td>platform&gt;resource</td><td>Comma separated list.</td></tr>
<tr><td>instrument</td><td></td><td>platform&gt;instrument&gt;long_name</td><td>Comma separated list.</td></tr>
<tr><td>instrument_vocabulary</td><td></td><td>platform&gt;instrument&gt;resource</td><td>Comma separated list.</td></tr>
<tr><td>source</td><td></td><td>activity_type</td><td>Semicolon separated list.</td></tr>
<tr><td>creator_name</td><td></td><td>dataset_citation&gt;author</td><td>Comma separated list.</td></tr>
<tr><td>date_created</td><td></td><td>dataset_citation&gt;publication_date</td><td>Comma separated list.</td></tr>
<tr><td>title</td><td></td><td>dataset_citation&gt;title</td><td></td></tr>
<tr><td>publisher_name</td><td></td><td>dataset_citation&gt;publisher</td><td>Comma separated list.</td></tr>
<tr><td>metadata_link</td><td></td><td>dataset_citation&gt;url</td><td>Comma separated list.</td></tr>
<tr><td>references</td><td></td><td>dataset_citation&gt;other</td><td>Comma separated list.</td></tr>
</tbody></table>
</div>
<p>The following elements are ACDD extensions that are needed to improve (meta)data interoperability. Please refer to the documentation of <a href="https://htmlpreview.github.io/?https://github.com/metno/mmd/blob/master/doc/mmd-specification.html">MMD</a> for more details:</p>
<div class="table-wrapper"><table><thead><tr><th>Necessary non-ACDD Attribute</th><th>Default</th><th>MMD equivalent</th><th>Comment</th></tr></thead><tbody>
<tr><td>spatial_representation</td><td></td><td>spatial_representation</td><td>No repetition allowed.</td></tr>
<tr><td>alternate_identifier</td><td></td><td>alternate_identifier&gt;alternate_identifier</td><td>Alternative identifier for the dataset (but not DOI). Comma separated list.</td></tr>
<tr><td>alternate_identifier_type</td><td></td><td>alternate_identifier&gt;type</td><td>Identification of the type of identifier used. Comma separated list.</td></tr>
<tr><td>date_metadata_modified_type</td><td></td><td>last_metadata_update&gt;update&gt;type</td><td>E.g., major or minor modification. Comma separated list.</td></tr>
<tr><td>date_created_type</td><td>Created</td><td>last_metadata_update&gt;update&gt;type</td><td></td></tr>
<tr><td>title_no</td><td></td><td>title&gt;title</td><td>Used for Norwegian version of the title.</td></tr>
<tr><td>title_lang</td><td>en</td><td>title&gt;lang</td><td>ISO language code.</td></tr>
<tr><td>summary_no</td><td></td><td>abstract&gt;abstract</td><td>Used for Norwegian version of the abstract.</td></tr>
<tr><td>summary_lang</td><td>en</td><td>abstract&gt;lang</td><td>ISO language code.</td></tr>
<tr><td>dataset_production_status</td><td>Complete</td><td>dataset_production_status</td><td>No repetition allowed.</td></tr>
<tr><td>access_constraint</td><td></td><td>access_constraint</td><td>No repetition allowed.</td></tr>
<tr><td>license_resource</td><td></td><td>use_constraint&gt;resource</td><td>No repetition allowed.</td></tr>
<tr><td>contributor_email</td><td>Not available</td><td>personnel&gt;email</td><td>Comma separated list.</td></tr>
<tr><td>contributor_institution</td><td></td><td>personnel&gt;organisation</td><td></td></tr>
<tr><td>contributor_organisation</td><td></td><td>personnel&gt;organisation</td><td></td></tr>
<tr><td>institution_short_name</td><td></td><td>data_center&gt;data_center_name&gt;short_name</td><td>Comma separated list.</td></tr>
<tr><td>related_dataset_id</td><td></td><td>related_dataset&gt;related_dataset</td><td>Comma separated list.</td></tr>
<tr><td>related_dataset_relation_type</td><td></td><td>related_dataset&gt;relation_type</td><td>Comma separated list.</td></tr>
<tr><td>iso_topic_category</td><td></td><td>iso_topic_category</td><td>Comma separated list.</td></tr>
<tr><td>project_short_name</td><td></td><td>project&gt;short_name</td><td>Semicolon separated list.</td></tr>
<tr><td>quality_control</td><td></td><td>quality_control</td><td>No repetition allowed.</td></tr>
<tr><td>doi</td><td></td><td>dataset_citation&gt;doi</td><td></td></tr>
</tbody></table>
</div>
<h3 id="623-how-to-add-netcdf-cf-data-to-thredds"><a class="header" href="#623-how-to-add-netcdf-cf-data-to-thredds">6.2.3 How to add NetCDF-CF data to thredds</a></h3>
<p>This section should contain institution specific information about how to add netcdf-cf files to thredds.</p>
<h3 id="624-how-to-register-your-data-in-the-catalog-service"><a class="header" href="#624-how-to-register-your-data-in-the-catalog-service">6.2.4 How to register your data in the catalog service</a></h3>
<p>In order to make a dataset findable, a dataset must be registered in a searchable catalog with appropriate metadata. The (meta)data catalog is indexed and exposed through <a href="https://en.wikipedia.org/wiki/Catalogue_Service_for_the_Web">CSW</a>.</p>
<p>The following needs to be done:</p>
<ol>
<li>
<p>Generate an MMD xml file from your NetCDF-CF file (see <a href="#local-mmd-xml-generation">Generation of MMD xml file from NetCDF-CF</a>)</p>
</li>
<li>
<p>Test your mmd xml metadata file (see <a href="#test-mmd-file">Test the MMD xml file</a>)</p>
</li>
<li>
<p>Push the MMD xml file to the discovery metadata catalog (see <a href="#push-mmd-file">Push the MMD xml file to the discovery metadata catalog</a>)</p>
</li>
</ol>
<h4 id="6241-generation-of-mmd-xml-file-from-netcdf-cf"><a class="header" href="#6241-generation-of-mmd-xml-file-from-netcdf-cf">6.2.4.1 Generation of MMD xml file from NetCDF-CF</a></h4>
<p>Clone the <a href="https://github.com/metno/py-mmd-tools.git">py-mmd-tools</a> repo and make a local installation with eg <code>pip install .</code>. This should bring in all needed dependencies (we recommend to use a virtual environment).</p>
<p>Then, generate your mmd xml file as follows:</p>
<p>cd script ./nc2mmd.py -i &lt;your netcdf file&gt; -o &lt;your xml output directory&gt;&lt;/programlisting&gt;</p>
<p>See <code>./nc2mmd.py --help</code> for documentation and extra options.</p>
<p>You will find Extensible Stylesheet Language Transformations (XSLT) documents in the <a href="https://github.com/metno/mmd.git">MMD</a> repository. These can be used to translate the metadata documents from MMD to other vocabularies, such as ISO19115:</p>
<p>./bin/convert_from_mmd -i &lt;your mmd xml file&gt; -f iso -o &lt;your iso output file name&gt;&lt;/programlisting&gt;</p>
<p>Note that the discovery metadata catalog ingestion tool will take care of translations from MMD, so you don’t need to worry about that unless you have special interest in it.</p>
<h4 id="6242-test-the-mmd-xml-file"><a class="header" href="#6242-test-the-mmd-xml-file">6.2.4.2 Test the MMD xml file</a></h4>
<p>Install the <a href="https://github.com/metno/discovery-metadata-catalog-ingestor">dmci app</a>, and run the usage example locally. This will return an error message if anything is wrong with your MMD file.</p>
<h4 id="6243-push-the-mmd-xml-file-to-the-discovery-metadata-catalog"><a class="header" href="#6243-push-the-mmd-xml-file-to-the-discovery-metadata-catalog">6.2.4.3 Push the MMD xml file to the discovery metadata catalog</a></h4>
<p>For development and verification purposes:</p>
<p>curl --data-binary &quot;@&lt;PATH_TO_MMD_FILE&gt;&quot; https://dmci-*.s-enda.k8s.met.no/v1/insert&lt;/programlisting&gt;</p>
<p>where <code>*</code> should be either dev or staging.</p>
<p>For production (the official catalog):</p>
<p>curl --data-binary &quot;@&lt;PATH_TO_MMD_FILE&gt;&quot; https://dmci.s-enda.k8s.met.no/v1/insert&lt;/programlisting&gt;</p>
<h2 id="63-searching-data-in-the-catalog-service-for-the-web-csw-interface"><a class="header" href="#63-searching-data-in-the-catalog-service-for-the-web-csw-interface">6.3 Searching data in the Catalog Service for the Web (CSW) interface</a></h2>
<h3 id="631-using-opensearch"><a class="header" href="#631-using-opensearch">6.3.1 Using OpenSearch</a></h3>
<h4 id="6311-local-test-machines"><a class="header" href="#6311-local-test-machines">6.3.1.1 Local test machines</a></h4>
<p>The <a href="https://github.com/metno/vagrant-s-enda"><code>vagrant-s-enda</code></a> environment found at <a href="https://github.com/metno/vagrant-s-enda">vagrant-s-enda</a> provides OpenSearch support through <a href="https://github.com/geopython/pycsw">PyCSW</a>. To test OpenSearch via the browser, start the <code>vagrant-s-enda</code> vm (<code>vagrant up</code>) and go to the following address:</p>
<ul>
<li><code>http://10.10.10.10/pycsw/csw.py?mode=opensearch&amp;service=CSW&amp;version=2.0.2&amp;request=GetCapabilities</code></li>
</ul>
<h4 id="6312-online-catalog"><a class="header" href="#6312-online-catalog">6.3.1.2 Online catalog</a></h4>
<p>For searching the online metadata catalog, the base url (<code>http://10.10.10.10/</code>) must be replaced by <code>https://csw.s-enda.k8s.met.no/</code>:</p>
<ul>
<li><code>http://csw.s-enda.k8s.met.no/?mode=opensearch&amp;service=CSW&amp;version=2.0.2&amp;request=GetRecords&amp;elementsetname=full&amp;typenames=csw:Record&amp;resulttype=results</code></li>
</ul>
<h4 id="6313-opensearch-examples"><a class="header" href="#6313-opensearch-examples">6.3.1.3 OpenSearch examples</a></h4>
<p>To find all datasets in the catalog:</p>
<ul>
<li><code>https://csw.s-enda.k8s.met.no/?mode=opensearch&amp;service=CSW&amp;version=2.0.2&amp;request=GetRecords&amp;elementsetname=full&amp;typenames=csw:Record&amp;resulttype=results</code></li>
</ul>
<p>Or datasets within a given time span:</p>
<ul>
<li><code>http://csw.s-enda.k8s.met.no/?mode=opensearch&amp;service=CSW&amp;version=2.0.2&amp;request=GetRecords&amp;elementsetname=full&amp;typenames=csw:Record&amp;resulttype=results&amp;time=2000-01-01/2020-09-01</code></li>
</ul>
<p>Or datasets within a geographical domain (defined as a box with parameters min_longitude, min_latitude, max_longitude, max_latitude):</p>
<ul>
<li><code>https://csw.s-enda.k8s.met.no/?mode=opensearch&amp;service=CSW&amp;version=2.0.2&amp;request=GetRecords&amp;elementsetname=full&amp;typenames=csw:Record&amp;resulttype=results&amp;bbox=0,40,10,60</code></li>
</ul>
<p>Or, datasets from any of the Sentinel satellites:</p>
<ul>
<li><code>https://csw.s-enda.k8s.met.no/?mode=opensearch&amp;service=CSW&amp;version=2.0.2&amp;request=GetRecords&amp;elementsetname=full&amp;typenames=csw:Record&amp;resulttype=results&amp;q=sentinel</code></li>
</ul>
<h3 id="632-advanced-geographical-search"><a class="header" href="#632-advanced-geographical-search">6.3.2 Advanced geographical search</a></h3>
<p>PyCSW opensearch only supports geographical searches querying for a box. For more advanced geographical searches, one must write specific XML files. For example:</p>
<ul>
<li>To find all datasets containing a point:</li>
</ul>
<!-- -->
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; standalone=&quot;no&quot;?&gt;
&lt;csw:GetRecords
    xmlns:csw=&quot;http://www.opengis.net/cat/csw/2.0.2&quot;
    xmlns:ogc=&quot;http://www.opengis.net/ogc&quot;
    xmlns:gml=&quot;http://www.opengis.net/gml&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    service=&quot;CSW&quot;
    version=&quot;2.0.2&quot;
    resultType=&quot;results&quot;
    maxRecords=&quot;10&quot;
    outputFormat=&quot;application/xml&quot;
    outputSchema=&quot;http://www.opengis.net/cat/csw/2.0.2&quot;
    xsi:schemaLocation=&quot;http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd&quot; &gt;
  &lt;csw:Query typeNames=&quot;csw:Record&quot;&gt;
    &lt;csw:ElementSetName&gt;full&lt;/csw:ElementSetName&gt;
    &lt;csw:Constraint version=&quot;1.1.0&quot;&gt;
      &lt;ogc:Filter&gt;
        &lt;ogc:Contains&gt;
          &lt;ogc:PropertyName&gt;ows:BoundingBox&lt;/ogc:PropertyName&gt;
          &lt;gml:Point&gt;
            &lt;gml:pos srsDimension=&quot;2&quot;&gt;59.0 4.0&lt;/gml:pos&gt;
          &lt;/gml:Point&gt;
        &lt;/ogc:Contains&gt;
      &lt;/ogc:Filter&gt;
    &lt;/csw:Constraint&gt;
  &lt;/csw:Query&gt;
&lt;/csw:GetRecords&gt;
</code></pre>
<ul>
<li>To find all datasets intersecting a polygon:</li>
</ul>
<!-- -->
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; standalone=&quot;no&quot;?&gt;
&lt;csw:GetRecords
    xmlns:csw=&quot;http://www.opengis.net/cat/csw/2.0.2&quot;
    xmlns:gml=&quot;http://www.opengis.net/gml&quot;
    xmlns:ogc=&quot;http://www.opengis.net/ogc&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    service=&quot;CSW&quot;
    version=&quot;2.0.2&quot;
    resultType=&quot;results&quot;
    maxRecords=&quot;10&quot;
    outputFormat=&quot;application/xml&quot;
    outputSchema=&quot;http://www.opengis.net/cat/csw/2.0.2&quot;
    xsi:schemaLocation=&quot;http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd&quot; &gt;
  &lt;csw:Query typeNames=&quot;csw:Record&quot;&gt;
    &lt;csw:ElementSetName&gt;full&lt;/csw:ElementSetName&gt;
    &lt;csw:Constraint version=&quot;1.1.0&quot;&gt;
      &lt;ogc:Filter&gt;
        &lt;ogc:Intersects&gt;
          &lt;ogc:PropertyName&gt;ows:BoundingBox&lt;/ogc:PropertyName&gt;
          &lt;gml:Polygon&gt;
            &lt;gml:exterior&gt;
              &lt;gml:LinearRing&gt;
                &lt;gml:posList&gt;
                  47.00 -5.00 55.00 -5.00 55.00 20.00 47.00 20.00 47.00 -5.00
                &lt;/gml:posList&gt;
              &lt;/gml:LinearRing&gt;
            &lt;/gml:exterior&gt;
          &lt;/gml:Polygon&gt;
        &lt;/ogc:Intersects&gt;
      &lt;/ogc:Filter&gt;
    &lt;/csw:Constraint&gt;
  &lt;/csw:Query&gt;
&lt;/csw:GetRecords&gt;
</code></pre>
<ul>
<li>Then, you can query the CSW endpoint with, e.g., python:</li>
</ul>
<!-- -->
<pre><code>import requests
requests.post('https://csw.s-enda.k8s.met.no', data=open(my_xml_request).read()).text
</code></pre>
<h3 id="633-web-portals"><a class="header" href="#633-web-portals">6.3.3 Web portals</a></h3>
<p><strong>GeoNorge.no</strong></p>
<p><strong>TODO:</strong> describe how to search in geonorge, possibly with screenshots</p>
<h3 id="634-qgis"><a class="header" href="#634-qgis">6.3.4 QGIS</a></h3>
<p>MET Norway’s S-ENDA CSW catalog service is available at <code>https://csw.s-enda.k8s.met.no</code>. This can be used from QGIS as follows:</p>
<ol>
<li>
<p>Select <code>Web &gt; MetaSearch &gt; MetaSearch</code> menu item</p>
</li>
<li>
<p>Select <code>Services &gt; New</code></p>
</li>
<li>
<p>Type, e.g., <code>csw.s-enda.k8s.met.no</code> for the name</p>
</li>
<li>
<p>Type <code>https://csw.s-enda.k8s.met.no</code> for the URL</p>
</li>
</ol>
<p>Under the <code>Search</code> tab, you can then add search parameters, click <code>Search</code>, and get a list of available datasets.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../dmh_content/chapters/c5_data-governance.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../dmh_content/chapters/c7_acknowledgements.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../dmh_content/chapters/c5_data-governance.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../dmh_content/chapters/c7_acknowledgements.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../../mermaid.min.js"></script>
        <script type="text/javascript" src="../../mermaid-init.js"></script>
    </body>
</html>
